# Partial Transaction Handling Guide

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏?

**–ß–∞—Å—Ç–∏—á–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è** = —Ç—Ä–µ–π–¥–µ—Ä –ø—Ä–æ–¥–∞–µ—Ç **—á–∞—Å—Ç—å** —Å–≤–æ–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤, –∞ –Ω–µ –≤—Å–µ —Å—Ä–∞–∑—É.

### –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏** - –ø—Ä–æ–¥–∞–∂–∞ —á–∞—Å—Ç—è–º–∏ –≤–º–µ—Å—Ç–æ all-in
2. **Take profit –ø–æ —É—Ä–æ–≤–Ω—è–º** - —Ñ–∏–∫—Å–∞—Ü–∏—è –ø—Ä–∏–±—ã–ª–∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è
4. **DCA –≤—ã—Ö–æ–¥** - —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –≤—ã—Ö–æ–¥–∞

---

## üìä –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: SHADOWVP —á–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏

### –¢—Ä–µ–π–¥–µ—Ä: `CyaE1VxvBrahnPWkqm5VsdCvyS2QmNht2UFrKJHga54o`

### üü¢ –ü–æ–∫—É–ø–∫–∞ (–≤—Ö–æ–¥ –≤ –ø–æ–∑–∏—Ü–∏—é):

```
–í—Ä–µ–º—è: 04:16:17
–¢–∏–ø: BUY
–¢–æ–∫–µ–Ω–æ–≤ –∫—É–ø–ª–µ–Ω–æ: 36,781,657 SHADOWVP
SOL –ø–æ—Ç—Ä–∞—á–µ–Ω–æ: 0.00203928 SOL
–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: $0.00002472 –∑–∞ —Ç–æ–∫–µ–Ω
```

**Entry Position:**
```
Total tokens: 36,781,657 SHADOWVP
Total cost: 0.00203928 SOL
Average entry: $0.00002472
```

---

### üî¥ –ß–∞—Å—Ç–∏—á–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ #1:

```
–í—Ä–µ–º—è: 04:25:28 (—á–µ—Ä–µ–∑ 9 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏)
–¢–∏–ø: SELL
–¢–æ–∫–µ–Ω–æ–≤ –ø—Ä–æ–¥–∞–Ω–æ: 42,419,786 SHADOWVP (–ë–û–õ–¨–®–ï —á–µ–º –∫—É–ø–∏–ª!)
SOL –ø–æ–ª—É—á–µ–Ω–æ: 8.488 SOL
–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: $0.00003092 –∑–∞ —Ç–æ–∫–µ–Ω
```

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?**
- –¢—Ä–µ–π–¥–µ—Ä –ø—Ä–æ–¥–∞–ª **42.4M —Ç–æ–∫–µ–Ω–æ–≤**, –Ω–æ –∫—É–ø–∏–ª —Ç–æ–ª—å–∫–æ **36.7M**
- –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —É –Ω–µ–≥–æ –±—ã–ª–∏ **—Å—Ç–∞—Ä—ã–µ —Ç–æ–∫–µ–Ω—ã** –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–∫—É–ø–æ–∫!
- `remaining_tokens: 49,746,894` = –æ—Å—Ç–∞–µ—Ç—Å—è 49.7M —Ç–æ–∫–µ–Ω–æ–≤

**P&L –¥–ª—è —ç—Ç–æ–π –ø—Ä–æ–¥–∞–∂–∏:**
```
Realized P&L: +$143.26 ‚úÖ
Price change: +24.8% ($0.00002472 ‚Üí $0.00003092)
```

---

### üî¥ –ß–∞—Å—Ç–∏—á–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ #2:

```
–í—Ä–µ–º—è: 04:26:44 (—á–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É)
–¢–∏–ø: SELL
–¢–æ–∫–µ–Ω–æ–≤ –ø—Ä–æ–¥–∞–Ω–æ: 9,195,414 SHADOWVP
SOL –ø–æ–ª—É—á–µ–Ω–æ: 2.163 SOL
–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: $0.00003491 –∑–∞ —Ç–æ–∫–µ–Ω
```

**–ü–æ—Å–ª–µ —ç—Ç–æ–π –ø—Ä–æ–¥–∞–∂–∏:**
```
remaining_tokens: 58,942,308 —Ç–æ–∫–µ–Ω–æ–≤ (wait... —ç—Ç–æ –ë–û–õ–¨–®–ï!)
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?**
- –¢—Ä–µ–π–¥–µ—Ä –ø—Ä–æ–¥–∞–ª 9.2M —Ç–æ–∫–µ–Ω–æ–≤
- –ù–æ `remaining_tokens` **—É–≤–µ–ª–∏—á–∏–ª–æ—Å—å**!
- –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: **–ë–´–õ–ê –ï–©–ï –û–î–ù–ê –ü–û–ö–£–ü–ö–ê –º–µ–∂–¥—É –ø—Ä–æ–¥–∞–∂–∞–º–∏!**

**P&L –¥–ª—è —ç—Ç–æ–π –ø—Ä–æ–¥–∞–∂–∏:**
```
Realized P&L: +$362.77 ‚úÖ
Price change: +41.2% ($0.00002472 ‚Üí $0.00003491)
```

---

### üî¥ –ß–∞—Å—Ç–∏—á–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ #3:

```
–í—Ä–µ–º—è: 04:27:24 (—á–µ—Ä–µ–∑ 40 —Å–µ–∫—É–Ω–¥)
–¢–∏–ø: SELL
–¢–æ–∫–µ–Ω–æ–≤ –ø—Ä–æ–¥–∞–Ω–æ: 27,586,242 SHADOWVP
SOL –ø–æ–ª—É—á–µ–Ω–æ: 5.008 SOL
–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: $0.00002943 –∑–∞ —Ç–æ–∫–µ–Ω
```

**–ü–æ—Å–ª–µ —ç—Ç–æ–π –ø—Ä–æ–¥–∞–∂–∏:**
```
remaining_tokens: 86,528,551 —Ç–æ–∫–µ–Ω–æ–≤
all_tokens_sold: false
```

**P&L –¥–ª—è —ç—Ç–æ–π –ø—Ä–æ–¥–∞–∂–∏:**
```
Realized P&L: +$44.33 ‚úÖ
Price change: +19.1% ($0.00002472 ‚Üí $0.00002943)
```

---

## üßÆ –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏?

### 1. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ `remaining_tokens`**

```typescript
// –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è–µ–º remaining_tokens
remaining_tokens = previous_remaining + current_amount

// –î–ª—è BUY:
remaining_tokens = previous_remaining + bought_amount

// –î–ª—è SELL:
remaining_tokens = previous_remaining - sold_amount
```

### 2. **–†–∞—Å—á–µ—Ç P&L –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏**

```typescript
// –§–æ—Ä–º—É–ª–∞ P&L –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏:
realized_pnl = (exit_price - avg_entry_price) * sold_amount * sol_price

// –ü—Ä–∏–º–µ—Ä –¥–ª—è SELL #1:
realized_pnl = ($0.00003092 - $0.00002472) * 42,419,786 * $196
             = $0.0000062 * 42,419,786 * $196
             = $143.26 ‚úÖ
```

### 3. **–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞ (FIFO)**

```typescript
// FIFO = First In, First Out
// –ü—Ä–æ–¥–∞–µ–º —Ç–æ–∫–µ–Ω—ã –∏–∑ –ü–ï–†–í–û–ô –ø–æ–∫—É–ø–∫–∏

avg_entry_price = total_cost / total_tokens

// –ï—Å–ª–∏ –±—ã–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∫—É–ø–æ–∫:
avg_entry_price = (buy1_cost + buy2_cost + ...) / (buy1_amount + buy2_amount + ...)
```

### 4. **–§–ª–∞–≥ `all_tokens_sold`**

```typescript
if (remaining_tokens <= 0) {
  all_tokens_sold = true;  // –í—Å–µ —Ç–æ–∫–µ–Ω—ã –ø—Ä–æ–¥–∞–Ω—ã
  token_pnl = 0;  // P&L —Å–±—Ä–æ—à–µ–Ω
} else {
  all_tokens_sold = false;  // –ï—â–µ –¥–µ—Ä–∂–∏–º —Ç–æ–∫–µ–Ω—ã
  // Unrealized P&L –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è
}
```

---

## üìà –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ KOL Feed

### –ü—Ä–∏–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–∞—Å—Ç–∏—á–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üî¥ SELL SHADOWVP (Partial 1/3)                              ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ Sold: 42.4M SHADOWVP (60% of position)                     ‚îÇ
‚îÇ Received: +8.488 SOL ($1,663)                              ‚îÇ
‚îÇ Price: $0.00003092 (+24.8% from entry)                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ üí∞ Realized P&L: +$143.26 (+8.6%)                          ‚îÇ
‚îÇ üìä Remaining: 49.7M SHADOWVP                                ‚îÇ
‚îÇ üíµ Unrealized: +$234.52                                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ Avg Entry: $0.00002472                                     ‚îÇ
‚îÇ Exit Price: $0.00003092                                    ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ [View Details] [Copy Address] [Solscan]                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîç –ß–∞—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: Take Profit –ø–æ —É—Ä–æ–≤–Ω—è–º

```
BUY: 100M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.01
SELL: 25M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.015 (+50%) ‚Üí Realized P&L +$125
SELL: 25M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.02 (+100%) ‚Üí Realized P&L +$250
SELL: 25M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.025 (+150%) ‚Üí Realized P&L +$375
SELL: 25M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.03 (+200%) ‚Üí Realized P&L +$500

Total Realized P&L: +$1,250
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Stop Loss —á–∞—Å—Ç—è–º–∏

```
BUY: 100M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.01
–¶–µ–Ω–∞ –ø–∞–¥–∞–µ—Ç –¥–æ $0.008 (-20%)
SELL: 50M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.008 ‚Üí Realized P&L -$100
Remaining: 50M —Ç–æ–∫–µ–Ω–æ–≤
Unrealized P&L: -$100

–¶–µ–Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ $0.012
SELL: 50M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.012 ‚Üí Realized P&L +$100

Total Realized P&L: $0 (breakeven)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫ –ø–æ–∑–∏—Ü–∏–∏ (Averaging Down)

```
BUY #1: 50M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.01 = $500
–¶–µ–Ω–∞ –ø–∞–¥–∞–µ—Ç –¥–æ $0.005
BUY #2: 50M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.005 = $250

Average Entry: ($500 + $250) / 100M = $0.0075

SELL: 100M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.009
Realized P&L: ($0.009 - $0.0075) * 100M = +$150 ‚úÖ
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ `remaining_tokens` –ª–æ–≥–∏–∫–∏

```sql
-- –ö–∞–∂–¥–∞—è –ø—Ä–æ–¥–∞–∂–∞ –¥–æ–ª–∂–Ω–∞ —É–º–µ–Ω—å—à–∞—Ç—å remaining_tokens
SELECT
  transaction_type,
  amount::numeric,
  remaining_tokens::numeric,
  LAG(remaining_tokens::numeric) OVER (ORDER BY block_time) as prev_remaining
FROM webhook_transactions
WHERE token_symbol = 'SHADOWVP'
  AND from_address = 'CyaE1VxvBrahnPWkqm5VsdCvyS2QmNht2UFrKJHga54o'
ORDER BY block_time;
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```
BUY: remaining_tokens —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
SELL: remaining_tokens —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
```

### –¢–µ—Å—Ç 2: P&L –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∏ —Ä–æ—Å—Ç–µ —Ü–µ–Ω—ã

```sql
-- –î–ª—è –≤—Å–µ—Ö SELL, –≥–¥–µ exit_price > entry_price
SELECT
  token_symbol,
  transaction_type,
  token_pnl::numeric,
  current_token_price::numeric
FROM webhook_transactions
WHERE transaction_type = 'SELL'
  AND token_pnl::numeric > 0
  AND block_time >= NOW() - INTERVAL '24 hours';
```

### –¢–µ—Å—Ç 3: –°—É–º–º–∞ –≤—Å–µ—Ö –ø—Ä–æ–¥–∞–∂ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å –ø–æ–∫—É–ø–∫–∏

```sql
-- Total bought vs total sold
SELECT
  token_symbol,
  SUM(CASE WHEN transaction_type = 'BUY' THEN amount::numeric ELSE 0 END) as total_bought,
  SUM(CASE WHEN transaction_type = 'SELL' THEN amount::numeric ELSE 0 END) as total_sold,
  SUM(CASE WHEN transaction_type = 'BUY' THEN amount::numeric ELSE 0 END) -
  SUM(CASE WHEN transaction_type = 'SELL' THEN amount::numeric ELSE 0 END) as net_position
FROM webhook_transactions
WHERE from_address = 'CyaE1VxvBrahnPWkqm5VsdCvyS2QmNht2UFrKJHga54o'
  AND token_symbol = 'SHADOWVP'
GROUP BY token_symbol;
```

---

## ‚öôÔ∏è Code Implementation

### Edge Function: Partial Sell Handling

```typescript
// Calculate remaining tokens after transaction
function calculateRemainingTokens(
  previousRemaining: number,
  transactionType: string,
  amount: number
): number {
  if (transactionType === "BUY") {
    return previousRemaining + amount;
  } else if (transactionType === "SELL") {
    return previousRemaining - amount;
  }
  return previousRemaining;
}

// Calculate realized P&L for partial sell
function calculateRealizedPnL(
  soldAmount: number,
  avgEntryPrice: number,
  exitPrice: number,
  solPrice: number
): number {
  const priceChange = exitPrice - avgEntryPrice;
  const pnlInTokenValue = priceChange * soldAmount;
  const pnlInUSD = pnlInTokenValue * solPrice;
  return pnlInUSD;
}

// Example usage:
const partialSell = {
  soldAmount: 42419786,
  avgEntryPrice: 0.00002472,
  exitPrice: 0.00003092,
  solPrice: 196
};

const realizedPnL = calculateRealizedPnL(
  partialSell.soldAmount,
  partialSell.avgEntryPrice,
  partialSell.exitPrice,
  partialSell.solPrice
);

console.log(`Realized P&L: $${realizedPnL.toFixed(2)}`);
// Output: Realized P&L: $143.26 ‚úÖ
```

---

## üéØ Summary

### ‚úÖ –ß—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–µ—Ç –¥–ª—è —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:

1. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç `remaining_tokens`** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏/–ø—Ä–æ–¥–∞–∂–∏
2. **–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç Realized P&L** –¥–ª—è –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏—á–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏
3. **–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç Unrealized P&L** –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ç–æ–∫–µ–Ω–æ–≤
4. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É –≤—Ö–æ–¥–∞** (FIFO) –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ P&L
5. **–§–ª–∞–≥ `all_tokens_sold`** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∑–∞–∫—Ä—ã—Ç–∞ –ª–∏ –ø–æ–∑–∏—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é

### üìä –†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (SHADOWVP –ø—Ä–∏–º–µ—Ä):

```
BUY: 36.7M —Ç–æ–∫–µ–Ω–æ–≤ @ $0.00002472

SELL #1: 42.4M @ $0.00003092 ‚Üí +$143.26 ‚úÖ
SELL #2: 9.2M @ $0.00003491 ‚Üí +$362.77 ‚úÖ
SELL #3: 27.6M @ $0.00002943 ‚Üí +$44.33 ‚úÖ

Total Realized: +$550.36
Remaining: 86.5M —Ç–æ–∫–µ–Ω–æ–≤
Status: Position still open
```

### üí° –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:

- ‚úÖ –ß–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ **–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è**
- ‚úÖ P&L —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è **–¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–¥–∞–∂–∏ –æ—Ç–¥–µ–ª—å–Ω–æ**
- ‚úÖ `remaining_tokens` **—Ç–æ—á–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –∏ –ø—Ä–æ–¥–∞–∂–∏**
- ‚úÖ FIFO –º–µ—Ç–æ–¥ –¥–ª—è **—á–µ—Å—Ç–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ P&L**

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏!** üéâ
